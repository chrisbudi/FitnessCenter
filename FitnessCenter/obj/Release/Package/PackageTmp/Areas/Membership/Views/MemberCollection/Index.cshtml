@{
    ViewBag.Title = "Membership Collection";
}

<!-- BEGIN PAGE HEADER-->
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title">
        <h1>
            Collection <small>Member</small>
        </h1>
    </div>
</div>


@Html.Partial("_pageBreadcrumbs")

<!-- END PAGE HEADER-->
<!-- BEGIN PAGE CONTENT-->

<div class="portlet light">

    <div class="portlet-title">
        <div class="caption">
            <i class="icon-basket font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">Collection </span>
            <span class="caption-helper">Membership...</span>
        </div>
    </div>
    <div class="portlet-body">
        <div class="row margin-bottom-20">
            <div class="col-md-12">
                <table class="table table-striped table-bordered table-hover" id="TableMember">
                    <thead>
                        <tr role="row" class="heading">
                            <th width="1%">No</th>
                            <th>membershipID</th>
                            <th>Nama Member</th>
                            <th>Sales</th>
                            <th>User</th>
                            <th>Tgl</th>
                            <th>Type</th>
                            <th>number</th>
                            @*                            <th>SubTotal</th>*@
                            @*                            <th>Admin</th>*@
                            @*                            <th>Discount</th>*@
                            <th>Total</th>

                            <th></th>
                        </tr>
                        <tr role="row" class="filter">
                            <td></td>
                            <td>
                                <input type="text" class="form-control form-filter input-sm" name="columns[1]FilterSearch">
                            </td>
                            <td></td>
                            <td>
                                <input type="text" class="form-control form-filter input-sm" name="columns[3]FilterSearch">
                            </td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <div class="margin-bottom-5">
                                    <button class="btn btn-sm yellow filter-submit margin-bottom"><i class="fa fa-search"></i>Search</button>
                                </div>
                                <button class="btn btn-sm red filter-cancel"><i class="fa fa-times"></i>Reset</button>
                            </td>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- END PAGE CONTENT-->
@section Scripts {
    @Scripts.Render("~/bundle/script/datatable")
    @*1---------Reporting---------*@
    @Html.Partial("Report/ReportView")


    <script>
        var loadDDL = null;
        $(function () {
            //            //Metronic.init(); // init metronic core components
            //            //Layout.init(); // init current layout


            var grid = new window.Datatable();

            grid.init({
                src: $("#TableMember"),
                onSuccess: function (grid) {
                    //alert('sucsess');

                },
                onError: function (grid) {
                    //alert('fail');
                },
                loadingMessage: 'Loading...',
                dataTable: {
                    // here you can define a typical datatable settings from https://datatables.net/usage/options
                    // Uncomment below line("dom" parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
                    // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/scripts/datatable.js).
                    // So when dropdowns used the scrollable div should be removed.
                    //"dom": "<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'<'table-group-actions pull-right'>>r>t<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'>>",
                    "lengthMenu": [
                        [10, 20, 50, 100, 150],
                        [10, 20, 50, 100, 150] // change per page values here
                    ],

                    "pageLength": 10, // default record count per page

                    "drawCallback": function (settings) {

                    },
                    "ajax": {
                        "url": "@Url.Action("MemberCollectionResult")", // ajax source
                    },
                    "columns": [
                        {
                            "name": "No",
                            orderable: true
                        },
                        {
                            "name": "trMembershipID",
                            "visible": true
                        },
                        {
                            "name": "tPerson.PNama"
                        },
                        {
                            "name": "tUserBackOffice.tPerson.PNama"
                        },
                        {
                            "name": "tUserBackOffice1.tPerson.PNama"
                        },
                        {
                            "name": "Subtotal",
                            orderable: false
                        },
                        {
                            "name": "Admin",
                            orderable: false
                        },
                        {
                            "name": "Disc",
                            orderable: false
                        },
                        {
                            "name": "Total",
                            orderable: false
                        },
                        {
                            "render":
                                function (data) {
                                    var d = data;

                                    return "<a href='@Url.Action("CollectMember", "MemberCollection")/" + d + "'><i class='fa fa-pencil'></i> Edit</a>";
                                },
                            "orderable": false,
                            "width": "3%"
                        }
                    ],
                    "order": [
                        [1, "asc"]
                    ] // set first column as a default sort by asc
                }
            });

            gridEvent.setEvent(grid);

        });
    </script>
}