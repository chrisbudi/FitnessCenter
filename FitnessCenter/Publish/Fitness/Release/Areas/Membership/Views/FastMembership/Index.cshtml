@{

    ViewBag.Title = "Create Membership Index";
}

<!-- BEGIN PAGE HEADER-->
<div class="page-head">
    <!-- BEGIN PAGE TITLE -->
    <div class="page-title">
        <h1>
            Register <small>Membership</small>
        </h1>
    </div>
</div>


@Html.Partial("_pageBreadcrumbs")

<!-- END PAGE HEADER-->
<!-- BEGIN PAGE CONTENT-->

<div class="portlet light">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-basket font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">Member Listing</span>
            <span class="caption-helper">register member...</span>
        </div>
        <div class="actions">
            <a class="btn btn-circle btn-default" href="@Url.Action("CreateMembership", "FastMembership")">
                <i class="fa fa-plus"></i>
                <span class="hidden-480">
                    Add New Membership
                </span>
            </a>
        </div>
    </div>
    <div class="portlet-body">
        <div class="row margin-bottom-20">
            <div class="col-md-12">
                <div class="table-container">
                    <div class="table-actions-wrapper">
                        inactive membership
                        <span> </span>
                        <button class="btn btn-sm btn-default table-group-action-submit">
                            <i class="fa fa-check"></i> Submit
                        </button>
                    </div>
                    <table class="table table-striped table-bordered table-hover" id="TableMember">
                        <thead>
                            <tr role="row" class="heading">
                                @*<th width="2%">
                                    <input type="checkbox" class="group-checkable checkbox">
                                </th>*@
                                <th>
                                    No
                                </th>
                                <th>
                                    Nama
                                </th>
                                <th>
                                    Gender
                                </th>
                                <th>
                                    Alamat
                                </th>
                                <th>
                                    Telepon
                                </th>
                                <th>
                                    HP
                                </th>
                                <th>
                                    Action
                                </th>
                                <th>
                                    Status
                                </th>
                                <th>
                                    PrintOR
                                </th>
                                <th>
                                    PrintMembership
                                </th>
                                <th>
                                    Action
                                </th>
                            </tr>
                            <tr role="row" class="filter">

                                <td></td>
                                <td>
                                    <input type="text" class="form-control form-filter input-sm" name="columns[1]FilterSearch">
                                </td>
                                <td></td>
                                <td>
                                    <input type="text" class="form-control form-filter input-sm" name="columns[3]FilterSearch">
                                </td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>
                                    <div class="margin-bottom-5">
                                        <button class="btn btn-sm yellow filter-submit margin-bottom"><i class="fa fa-search"></i>Search</button>
                                    </div>
                                    <button class="btn btn-sm red filter-cancel"><i class="fa fa-times"></i>Reset</button>
                                </td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- END PAGE CONTENT-->
@section Scripts {
    @Scripts.Render("~/bundle/script/datatable")
    @*1---------Reporting---------*@
    @Html.Partial("Report/ReportView")


    <script>
        var loadDDL = null;
        $(function () {
            //Metronic.init(); // init metronic core components
            //Layout.init(); // init current layout


            var grid = new window.Datatable();

            grid.init({
                src: $("#TableMember"),
                onSuccess: function (grid) {
                    //alert('sucsess');

                },
                onError: function (grid) {
                    //alert('fail');
                },
                loadingMessage: 'Loading...',
                dataTable: {
                    // here you can define a typical datatable settings from https://datatables.net/usage/options

                    // Uncomment below line("dom" parameter) to fix the dropdown overflow issue in the datatable cells. The default datatable layout
                    // setup uses scrollable div(table-scrollable) with overflow:auto to enable vertical scroll(see: assets/global/scripts/datatable.js).
                    // So when dropdowns used the scrollable div should be removed.
                    //"dom": "<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'<'table-group-actions pull-right'>>r>t<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'>>",
                    "lengthMenu": [
                        [10, 20, 50, 100, 150],
                        [10, 20, 50, 100, 150] // change per page values here
                    ],

                    "pageLength": 10, // default record count per page

                    "drawCallback": function (settings) {
                        pageReporting.init('@Url.Action("ReportPage", "Reporting", new { area = "" })', $('.btnPrintAgreement'), '');
                        pageReporting.init('@Url.Action("ReportPage", "Reporting", new { area = "" })', $('.btnPrintOR'), '');
                    },

                    "ajax": {
                        "url": "@Url.Action("MembershipResult", "FastMembership")", // ajax source
                    },

                    "columns": [
                        // {
                        //    "name": "membershipid",
                        //    orderable: false,
                        //    "data": 0,
                        //    "render": function(data) {
                        //        var d = data;
                        //        return '<input type="checkbox" name="id[]" class="checkboxes membershipidpost" value="' +
                        //            d + '">';
                        //    }
                        //},
                        { "name": "No" },
                        { "name": "tPerson.PNama" },
                        { "name": "tPerson.PGender" },
                        { "name": "tPerson.PAlamat" },
                        { "name": "tPerson.PTelp" },
                        { "name": "tPerson.PHP1" },
                        { "name": "tSalesActions.ActionName", "visible": false }, { "name": "tSalesActions.ActionName","visible": false },
                        {
                            "render": function (data) {
                                var d = data;
                                return "<a class='btnPrintOR' href='@Url.Action("PrintOr", "Member", new { area = "Office" })/" + d + "'><i class='fa fa-print'></i> Print OR</a>";
                            },
                            "orderable": false,
                            "width": "7%"
                        },
                        {
                            "render": function (data) {
                                var d = data;
                                return "<a class='btnPrintAgreement' href='@Url.Action("PrintAggreement")/" + d + "'><i class='fa fa-print'></i> Print Agreement</a>";
                            },
                            "orderable": false,
                            "width": "3%"
                        },
                        {
                            "render": function (data) {
                                var d = data;
                                return "<a href='@Url.Action("EditMember", "Member", new {area = "Office" })/" + d + "' class='btn btn-xs default btn-editable'>" +
                                    "<i class='fa fa-search'></i> View" +
                                    "</a>";
                            },
                            "orderable": false,
                            "width": "5%"

                        },

                    ],
                    "order": [
                        [2, "asc"]
                    ] // set first column as a default sort by asc
                }
            });


            $('#TableMember').on('draw.dt', function () {
                Metronic.init();

            });


            gridEvent.setEvent(grid);

        });
    </script>
}